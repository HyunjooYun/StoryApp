# StoryApp 최종개발사항명세서

**프로젝트명:** StoryApp (다국어 동화구연 앱)  
**버전:** 1.0.0+1  
**작성일:** 2025년 12월 13일  
**개발기간:** 2025년 11월 ~ 2025년 12월  

---

## 1. 프로젝트 개요

### 1.1 목적
한국 및 다문화 가정 아동을 위한 다국어 동화구연 모바일 애플리케이션으로, AI 기반 스크립트 생성, 번역, TTS(음성합성), 2D 캐릭터 립싱크 애니메이션을 통합하여 한국 전래동화를 6개 언어(한국어, 영어, 중국어, 베트남어, 일본어, 독일어)로 제공합니다.

### 1.2 목표 사용자
- **주 사용자:** 4~10세 아동
- **보조 사용자:** 보호자 및 교사
- **대상:** 다문화 가정 및 언어 교육이 필요한 아동

### 1.3 핵심 가치
- 연령별 맞춤형 콘텐츠 제공
- 다국어 지원을 통한 언어 교육
- AI 기반 자연스러운 음성 합성
- 실시간 립싱크 및 표정 동기화를 통한 몰입감 제공

---

## 2. 시스템 아키텍처

### 2.1 전체 구조
```
[Flutter App (Client)]
  ├─ UI/State Management (Provider)
  ├─ Audio Player (audioplayers v6.5.1)
  ├─ TTS Service (Azure Speech API)
  ├─ Resource Management (voice_config.json)
  ├─ HTTP Client (REST) ←→ POST /tts
  └─ WebSocket Client (viseme_event_service)
     ↓ WebSocket / REST
[Python FastAPI Backend (tts_server.py)]
  ├─ TTS Orchestrator (Azure Speech SDK)
  ├─ REST API Server (FastAPI)
  ├─ Viseme Event Streaming
  ├─ WebSocket Server
  └─ Audio File Generation (mp3)
```

### 2.2 기술 스택

#### 프론트엔드 (Flutter/Dart)
- **Framework:** Flutter 3.x, Dart 3.x
- **상태관리:** Provider v6.1.1
- **오디오 재생:** audioplayers v6.5.1
- **TTS:** flutter_tts v4.0.2
- **HTTP 통신:** http v1.1.0
- **WebSocket:** web_socket_channel v3.0.3
- **파일 처리:** file_picker v10.3.7, path_provider v2.1.1
- **환경변수:** flutter_dotenv v6.0.0
- **로컬 저장소:** shared_preferences v2.2.2

#### 백엔드 (Python)
- **Framework:** FastAPI + Uvicorn
- **TTS:** Azure Speech SDK v1.47.0
- **실시간 통신:** WebSocket
- **비동기 처리:** asyncio, concurrent.futures

#### AI/클라우드 서비스
- **TTS:** Azure Speech Service
- **번역:** Azure AI Translator (선택적)
- **스크립트 생성:** OpenAI API

---

## 3. 구현 기능

### 3.1 핵심 기능

#### 3.1.1 동화 재생 시스템
- **다국어 지원:** 6개 언어 (한국어, 영어, 중국어, 베트남어, 일본어, 독일어)
- **TTS 음성 합성:** Azure TTS API 연동
  - 언어별/성별/연령별 음성 선택
  - voice_config.json 기반 SSML 파라미터 관리
  - rate, pitch 조절 (x-slow, slow, medium, fast, x-fast)
- **오디오 재생:** mp3 파일 생성 및 재생
- **페이지네이션:** TextPainter 기반 동적 페이지 분할
- **자막 동기화:** 텍스트 박스에 현재 재생 중인 내용 표시

#### 3.1.2 캐릭터 애니메이션
- **립싱크:** Azure Viseme 이벤트 기반 입모양 동기화
  - 21개 Viseme ID → 13개 앱 내부 Viseme 매핑
  - WebSocket 실시간 이벤트 수신
  - 남성(MH)/여성(SY) 캐릭터별 이미지 세트
- **표정 애니메이션:** 
  - 눈 깜박임 루프 (2~4초 간격)
  - 감정 기반 표정 전환 (기쁨, 슬픔, 놀람 등)
- **이미지 리소스:** PNG 스프라이트 기반

#### 3.1.3 사용자 인터페이스

**홈 화면 (home_screen.dart)**
- 그라데이션 배경 (보라색 계열)
- 캐릭터 이미지 표시
- 동화 듣기 버튼
- 설정 버튼
- 버전 정보 표시

**설정 화면 (settings_screen.dart)**
- 언어 선택 (6개 버튼: 한국어, 영어, 중국어, 베트남어, 일본어, 독일어)
- 연령 선택 (드롭다운: 5~12세)
- 캐릭터 선택 (카드 형식: 남자아이/여자아이)
- 볼륨 조절 (슬라이더: 0~100%)
- 속도 조절 (슬라이더: 0.5~2.0x)
- 완료/취소 버튼

**동화 선택 화면 (story_selection_screen.dart)**
- 동화 카드 리스트 (4개 기본 제공)
  - 은혜갚은 까치
  - 의좋은 형제
  - 콩쥐팥쥐
  - 혹부리 영감
- 진행률 표시 (백분율)
- 상태 표시 (완료/진행중/시작 안함)
- TXT 파일 업로드 기능
- 스크립트 변환 기능

**동화 읽기 화면 (story_reading_screen.dart)**
- 캐릭터 애니메이션 영역
- 텍스트 박스 (페이지네이션)
- 재생 컨트롤 (Play/Pause 토글)
- 페이지 이동 (이전/다음 버튼)
- 홈 버튼 (종료)
- 진행률 바

**Viseme 디버그 화면 (viseme_debug_screen.dart)**
- WebSocket 연결 상태 표시
- Viseme 이벤트 실시간 모니터링
- 개발 및 디버깅 용도

### 3.2 데이터 모델

#### Story 모델 (models/story.dart)
```dart
class Story {
  final String id;
  final String title;
  final String content;          // 원문
  String? adaptedScript;         // 변환된 스크립트
  String language;
  int targetAge;
  double progress;
  String status;
}
```

#### StorySettings 모델 (models/story_settings.dart)
```dart
class StorySettings {
  String language;
  int age;
  String character;              // 'boy' or 'girl'
  double volume;
  double speed;
}
```

#### VoiceConfig 모델 (models/voice_config.dart)
```json
{
  "languages": {
    "한국어": {
      "xmlLang": "ko-KR",
      "ageRules": [
        {
          "max": 7,
          "rate": "1.0",
          "pitch": "10%",
          "model": {
            "male": "ko-KR-InJoonNeural",
            "female": "ko-KR-SunHiNeural"
          }
        }
      ]
    }
  }
}
```

### 3.3 서비스 레이어

#### audio_player_service.dart
- AudioPlayer 인스턴스 관리
- mp3 파일 재생/일시정지/정지
- 재생 위치 추적
- 볼륨 조절

#### azure_tts_service.dart
- Azure Speech API 호출
- SSML 생성 및 전송
- mp3 파일 생성 및 저장
- voice_config.json 기반 파라미터 적용

#### viseme_event_service.dart
- WebSocket 연결 관리
- Viseme 이벤트 수신
- 오디오 오프셋 동기화
- 이벤트 스트림 제공

#### story_service.dart
- Story 데이터 로드/저장
- TXT 파일 업로드 처리
- 스크립트 변환 관리

#### openai_service.dart
- OpenAI API 연동
- 연령별 스크립트 생성 (선택적)

#### translation_service.dart
- 다국어 번역 처리 (선택적)

#### emotion_analysis_service.dart
- 감정 분석 및 표정 매핑

#### logging_service.dart
- 앱 로그 관리
- 디버그 정보 저장

### 3.4 백엔드 서버 (tts_server.py)

#### 주요 기능
- FastAPI 기반 WebSocket 서버
- Azure Speech SDK 연동
- Viseme 이벤트 실시간 스트리밍
- mp3 파일 생성 및 제공
- 비동기 처리 및 에러 핸들링

#### 엔드포인트
- `POST /tts`: TTS 음성 생성 (mp3 파일 반환)
- `WebSocket /ws/tts`: Viseme 이벤트 스트리밍

#### 주요 처리 로직
```python
- Azure Speech SDK 초기화
- SSML 파라미터 적용
- 오디오 생성 (mp3)
- Viseme 이벤트 큐잉
- WebSocket으로 실시간 전송
- 대기 중인 이벤트 드레이닝 (_drain_pending_visemes)
- 완료 메시지 전송
```

---

## 4. Azure Viseme 매핑 시스템

### 4.1 Viseme 매핑 테이블

| Azure viseme_id | 대표 발음 | 앱 viseme | 이미지 파일 |
|-----------------|-----------|-----------|-------------|
| 0 | Silence | 0 (Neutral) | viseme_00_neutral.png |
| 1 | ae/ax/ah | 5 (AH) | viseme_05_ah.png |
| 2 | aa | 4 (AA) | viseme_04_aa.png |
| 3 | ao | 6 (AO) | viseme_06_ao.png |
| 4 | ey/eh/uh | 3 (EH) | viseme_03_eh.png |
| 5 | er | 11 (LR) | viseme_11_lr.png |
| 6 | iy/ih | 2 (AI) | viseme_02_ai.png |
| 7 | uw/w | 7 (UW) | viseme_07_uw.png |
| 8 | ow | 6 (AO) | viseme_06_ao.png |
| 9 | aw | 8 (OY) | viseme_08_oy.png |
| 10 | oy | 8 (OY) | viseme_08_oy.png |
| 11 | ay | 2 (AI) | viseme_02_ai.png |
| 12 | h | 0 (Neutral) | viseme_00_neutral.png |
| 13 | r | 11 (LR) | viseme_11_lr.png |
| 14 | l | 11 (LR) | viseme_11_lr.png |
| 15 | s/z | 9 (SZ) | viseme_09_sz.png |
| 16 | sh/ch | 10 (CH) | viseme_10_ch.png |
| 17 | th/dh | 9 (SZ) | viseme_09_sz.png |
| 18 | f/v | 12 (FV) | viseme_12_fv.png |
| 19 | d/t/n | 1 (BMP) | viseme_01_bmp.png |
| 20 | k/g/ng | 9 (SZ) | viseme_09_sz.png |
| 21 | p/b/m | 1 (BMP) | viseme_01_bmp.png |

### 4.2 이미지 리소스 구조
```
assets/images/
├── MH_viseme/              # 남성 캐릭터 립싱크 이미지
│   ├── viseme_00_neutral.png
│   ├── viseme_01_bmp.png
│   ├── viseme_02_ai.png
│   └── ...
├── SY_viseme/              # 여성 캐릭터 립싱크 이미지
│   ├── viseme_00_neutral.png
│   ├── viseme_01_bmp.png
│   └── ...
└── MH_eye/                 # 눈 표정 이미지
    ├── eye_neutral.png
    ├── eye_happy.png
    └── ...
```

---

## 5. 개발 과정 및 이슈 해결

### 5.1 주요 개발 마일스톤

#### 2025년 11월 초 (기초 설계)
- 프로젝트 기획 및 아키텍처 설계
- Flutter 프로젝트 초기 설정
- UI/UX 와이어프레임 작성

#### 2025년 11월 중순 (기본 기능 구현)
- 홈/설정/동화선택/읽기 화면 구현
- Azure TTS API 연동
- Story 모델 및 Provider 구조 설계
- voice_config.json 시스템 구축
- 독일어 지원 추가

#### 2025년 11월 하순 (고급 기능 구현)
- **11월 17일:** SSML rate 퍼센트 문제 해결
  - 퍼센트(%) 대신 'x-slow', 'slow' 등 키워드로 변환
  - 자연스러운 재생 속도 구현
- **11월 22-23일:** 페이지네이션 및 TTS 동기화
  - TextPainter 기반 동적 페이지 분할
  - 페이지 단위 TTS 재생
  - 멈춤/이동 시 즉시 중지 기능
- **11월 24일:** TXT 파일 업로드 기능 구현
  - 파일 선택 및 스크립트 변환
  - adaptedScript 필드 추가
- **11월 25일:** WebSocket 기반 Viseme 시스템 구축
  - FastAPI 서버 구현
  - 실시간 이벤트 스트리밍
  - 포트 충돌 해결 (PID 19724)

#### 2025년 11월 말 (립싱크 시스템 완성)
- **11월 27일:** Viseme 큐 비어있는 문제 해결
  - Future 집합 및 락 기반 동기화
  - _drain_pending_visemes() 구현
  - 이벤트 누락 방지
- **11월 28일:** 초기화 및 URL 설정 개선
  - .env 기반 WebSocket URL 우선 사용
  - 플랫폼별 fallback 로직 (127.0.0.1, 10.0.2.2)
  - 눈 깜박임 루프 구현
  - 감정 애니메이션 타이머 관리

### 5.2 주요 기술적 이슈 및 해결

#### 이슈 1: Azure TTS 속도 문제
**문제:** SSML rate에 퍼센트(%) 값 사용 시 부자연스러운 속도  
**원인:** Azure Speech API의 rate 파라미터 형식 오해  
**해결:** 
- 숫자 값을 'x-slow', 'slow', 'medium', 'fast', 'x-fast'로 변환
- voice_config.json 업데이트
- 자연스러운 음성 속도 달성

#### 이슈 2: Viseme 이벤트 누락
**문제:** WebSocket 연결 종료 후 일부 Viseme 이벤트 손실  
**원인:** 비동기 전송 중 소켓 종료 타이밍 이슈  
**해결:**
- Future 집합으로 대기 중인 전송 작업 추적
- _drain_pending_visemes() 메서드로 완료 보장
- 락을 이용한 동기화

#### 이슈 3: WebSocket URL 설정
**문제:** 플랫폼별 다른 localhost 주소 (127.0.0.1 vs 10.0.2.2)  
**원인:** Android 에뮬레이터는 10.0.2.2를 호스트 머신으로 인식  
**해결:**
- .env 파일에 VISEME_WEBSOCKET_URL 환경변수 사용
- 플랫폼 감지 후 적절한 fallback 주소 제공
- 초기화 로그로 디버깅 용이성 향상

#### 이슈 4: 페이지네이션 정확도
**문제:** 고정 문자 수 기반 분할로 인한 화면 오버플로우  
**원인:** 폰트 크기, 박스 크기 미고려  
**해결:**
- TextPainter를 이용한 실제 렌더링 크기 측정
- 동적 페이지 분할 알고리즘 구현
- 정확한 화면 맞춤

#### 이슈 5: 캐릭터 애니메이션 충돌
**문제:** 립싱크와 눈 깜박임이 동시에 실행되며 이미지 깜빡임  
**원인:** 타이머 관리 부재  
**해결:**
- 감정 애니메이션 시작 시 블링크 타이머 정지
- 감정 애니메이션 종료 후 블링크 재개
- setState() 호출 최적화

---

## 6. 테스트 및 품질 보증

### 6.1 테스트 환경
- **개발 환경:** Windows 11, Android Studio, VSCode
- **테스트 기기:**
  - Android 10+ 실기기 (갤럭시 탭)
  - Android 에뮬레이터
  - Windows 데스크톱

### 6.2 테스트 시나리오
1. 언어 선택 → TTS 음성 생성 확인
2. 연령 변경 → 음성 파라미터 변경 확인
3. 캐릭터 선택 → 이미지 세트 전환 확인
4. 동화 재생 → 립싱크 동기화 확인
5. 페이지 이동 → TTS 중지 및 재시작 확인
6. TXT 업로드 → 스크립트 변환 확인
7. WebSocket 연결 → Viseme 이벤트 수신 확인

### 6.3 알려진 제약사항
- Viseme 동기화 약간의 지연 (50-100ms) 존재
- 일부 언어의 음성 품질 차이
- 대용량 텍스트 파일 처리 시 메모리 사용량 증가
- 오프라인 모드 미구현 (캐싱 필요)

---

## 7. 설치 및 실행

### 7.1 환경 요구사항
- Flutter SDK 3.0.0 이상
- Dart SDK 3.0.0 이상
- Android SDK (Android 10 이상 권장)
- Python 3.8 이상 (백엔드 서버용)
- Azure Speech Service 구독 키

### 7.2 설치 절차

#### 1단계: Flutter 의존성 설치
```bash
flutter pub get
```

#### 2단계: 환경변수 설정
`.env` 파일 생성 및 설정:
```env
AZURE_TTS_KEY=your_azure_speech_key
AZURE_TTS_REGION=your_azure_region
VISEME_WEBSOCKET_URL=ws://127.0.0.1:8000/ws/tts
OPENAI_API_KEY=your_openai_key
```

#### 3단계: Python 백엔드 설정
```bash
# 가상환경 생성 (선택사항)
conda create -n storyapp python=3.10
conda activate storyapp

# 의존성 설치
pip install fastapi uvicorn websockets azure-cognitiveservices-speech

# 서버 실행
python tts_server.py
# 또는
uvicorn tts_server:app --host 0.0.0.0 --port 8000
```

#### 4단계: Flutter 앱 실행
```bash
# Android 에뮬레이터/실기기
flutter run

# Windows 데스크톱
flutter run -d windows
```

### 7.3 빌드 및 배포

#### Android APK 빌드
```bash
flutter build apk --release
# 출력: build/app/outputs/flutter-apk/app-release.apk
```

#### Android App Bundle 빌드 (Google Play)
```bash
flutter build appbundle --release
# 출력: build/app/outputs/bundle/release/app-release.aab
```

---

## 8. 향후 개발 계획

### 8.1 단기 계획 (1-2개월)
- [ ] 오프라인 재생 기능 (mp3 캐싱)
- [ ] 더 많은 동화 콘텐츠 추가 (10개 이상)
- [ ] 사용자 진행률 저장 (로컬 DB)
- [ ] 재생 이력 및 통계
- [ ] UI/UX 개선 및 애니메이션 추가

### 8.2 중기 계획 (3-6개월)
- [ ] iOS 버전 개발
- [ ] 사용자 계정 시스템
- [ ] 클라우드 동기화
- [ ] 부모/교사 대시보드
- [ ] 더 많은 캐릭터 추가 (4-6개)
- [ ] 배경 음악 및 효과음
- [ ] 게임 요소 추가 (퀴즈, 보상)

### 8.3 장기 계획 (6개월 이상)
- [ ] AI 기반 맞춤형 콘텐츠 생성
- [ ] 사용자 생성 콘텐츠 (UGC)
- [ ] 멀티플레이어 기능
- [ ] AR/VR 지원
- [ ] 음성 인식 상호작용
- [ ] 더 많은 언어 지원 (10개 이상)

---

## 9. 프로젝트 구조 상세

### 9.1 디렉토리 구조
```
StoryApp/
├── android/                    # Android 플랫폼 설정
├── ios/                        # iOS 플랫폼 설정
├── windows/                    # Windows 플랫폼 설정
├── assets/                     # 리소스 파일
│   ├── images/                 # 이미지 리소스
│   │   ├── MH_viseme/          # 남성 립싱크
│   │   ├── SY_viseme/          # 여성 립싱크
│   │   └── MH_eye/             # 눈 표정
│   ├── txt/                    # 동화 텍스트
│   ├── audio/                  # 오디오 파일
│   ├── fonts/                  # 폰트
│   └── voice_config.json       # TTS 설정
├── lib/                        # 소스 코드
│   ├── main.dart               # 앱 진입점
│   ├── models/                 # 데이터 모델
│   │   ├── story.dart
│   │   ├── story_settings.dart
│   │   └── voice_config.dart
│   ├── providers/              # 상태 관리
│   │   └── story_provider.dart
│   ├── screens/                # 화면 위젯
│   │   ├── home_screen.dart
│   │   ├── settings_screen.dart
│   │   ├── story_selection_screen.dart
│   │   ├── story_reading_screen.dart
│   │   └── viseme_debug_screen.dart
│   └── services/               # 비즈니스 로직
│       ├── audio_player_service.dart
│       ├── azure_tts_service.dart
│       ├── viseme_event_service.dart
│       ├── story_service.dart
│       ├── openai_service.dart
│       ├── translation_service.dart
│       ├── emotion_analysis_service.dart
│       └── logging_service.dart
├── test/                       # 테스트 코드
├── .env                        # 환경변수
├── pubspec.yaml                # Flutter 의존성
├── tts_server.py               # Python 백엔드
├── README.md                   # 프로젝트 소개
├── STATUSREPORT.md             # 개발 현황
├── StoryApp development plan.md # 개발 계획
└── 최종개발사항명세서.md         # 본 문서
```

### 9.2 주요 파일 설명

#### lib/main.dart
- 앱 진입점
- Provider 초기화
- 로깅 시스템 설정
- 환경변수 로드

#### lib/providers/story_provider.dart
- 전역 상태 관리
- Story 리스트 관리
- 설정 관리 (언어, 연령, 캐릭터 등)
- 재생 상태 관리

#### lib/screens/story_reading_screen.dart
- 동화 읽기 메인 화면
- 캐릭터 애니메이션 제어
- 오디오 재생 제어
- 페이지네이션 로직
- Viseme 이벤트 처리

#### lib/services/azure_tts_service.dart
- Azure Speech API 호출
- SSML 생성
- mp3 파일 생성
- voice_config.json 파싱

#### lib/services/viseme_event_service.dart
- WebSocket 연결 관리
- Viseme 이벤트 수신
- 오디오 오프셋 계산
- 이벤트 스트림 제공

#### tts_server.py
- FastAPI 웹서버
- Azure Speech SDK 래퍼
- Viseme 이벤트 스트리밍
- WebSocket 엔드포인트

#### assets/voice_config.json
- 언어별 TTS 설정
- 연령별 파라미터 (rate, pitch)
- 성별별 모델 (male, female)
- SSML 템플릿

---

## 10. API 명세

### 10.1 백엔드 API

#### POST /tts
**설명:** TTS 음성 생성  
**요청:**
```json
{
  "text": "동화 텍스트",
  "language": "ko-KR",
  "voice": "ko-KR-InJoonNeural",
  "rate": "1.0",
  "pitch": "0%"
}
```
**응답:** mp3 파일 (binary)

#### WebSocket /ws/tts
**설명:** Viseme 이벤트 스트리밍  
**수신 메시지:**
```json
{
  "type": "viseme",
  "visemeId": 1,
  "audioOffset": 1234567
}
```
```json
{
  "type": "done"
}
```

### 10.2 내부 서비스 인터페이스

#### AzureTTSService
```dart
Future<String> generateSpeech({
  required String text,
  required String language,
  required String voiceName,
  required double rate,
  required String pitch,
})
```

#### VisemeEventService
```dart
Stream<VisemeEvent> get visemeStream
Future<void> connect(String url)
void disconnect()
```

#### AudioPlayerService
```dart
Future<void> play(String filePath)
Future<void> pause()
Future<void> stop()
Future<void> seek(Duration position)
```

---

## 11. 보안 및 개인정보 보호

### 11.1 환경변수 관리
- .env 파일로 API 키 관리
- .gitignore에 .env 추가
- 프로덕션 빌드 시 난독화

### 11.2 데이터 저장
- 로컬 저장소만 사용 (shared_preferences)
- 개인정보 수집 안 함
- 사용자 계정 시스템 없음 (현재)

### 11.3 네트워크 보안
- HTTPS 통신 (Azure API)
- WSS (WebSocket Secure) 권장
- API 키 헤더에만 포함

---

## 12. 성능 최적화

### 12.1 최적화 사항
- 이미지 리소스 최적화 (PNG 압축)
- 오디오 파일 캐싱
- Provider를 통한 효율적인 상태 관리
- 비동기 처리로 UI 블로킹 방지
- 메모리 누수 방지 (dispose 패턴)

### 12.2 성능 지표
- 앱 실행 시간: ~2초
- TTS 생성 시간: 5-10초 (문단 기준)
- Viseme 동기화 지연: 50-100ms
- 메모리 사용량: 150-300MB

---

## 13. 문서 및 참고자료

### 13.1 개발 문서
- [README.md](README.md): 프로젝트 소개 및 사용법
- [STATUSREPORT.md](STATUSREPORT.md): 개발 현황 보고서
- [StoryApp development plan.md](StoryApp%20development%20plan.md): 개발 계획
- [assets/viseme.md](assets/viseme.md): Viseme 매핑 테이블

### 13.2 외부 문서
- [Flutter 공식 문서](https://flutter.dev/docs)
- [Azure Speech Service 문서](https://docs.microsoft.com/azure/cognitive-services/speech-service/)
- [Provider 패키지](https://pub.dev/packages/provider)
- [audioplayers 패키지](https://pub.dev/packages/audioplayers)

---

## 14. 기여자 및 라이선스

### 14.1 개발팀
- **프로젝트 관리:** [이름]
- **Flutter 개발:** [이름]
- **백엔드 개발:** [이름]
- **UI/UX 디자인:** [이름]

### 14.2 사용된 오픈소스
- Flutter Framework (BSD 3-Clause)
- Provider (MIT)
- audioplayers (MIT)
- FastAPI (MIT)
- Azure Cognitive Services SDK (Microsoft)

### 14.3 프로젝트 라이선스
- 본 프로젝트는 교육 목적으로 개발되었습니다.
- 상업적 사용 시 별도 협의가 필요합니다.

---

## 15. 연락처 및 지원

### 15.1 문의
- **이메일:** [이메일 주소]
- **GitHub:** [리포지토리 URL]
- **문서:** [프로젝트 위키 URL]

### 15.2 버그 리포트
- GitHub Issues 사용
- 재현 단계, 예상 동작, 실제 동작 기술
- 로그 파일 첨부 (logs/ 디렉토리)

### 15.3 기능 제안
- GitHub Discussions 사용
- 구체적인 사용 사례 설명
- 기대 효과 및 우선순위

---

## 16. 버전 히스토리

### v1.0.0 (2025-12-13)
- 초기 릴리스
- 6개 언어 지원
- Azure TTS 연동
- 립싱크 애니메이션
- 4개 기본 동화 제공
- TXT 파일 업로드 기능

---

## 17. 부록

### 17.1 용어 정리
- **TTS (Text-to-Speech):** 텍스트를 음성으로 변환하는 기술
- **Viseme:** 특정 소리를 낼 때의 입 모양
- **SSML (Speech Synthesis Markup Language):** 음성 합성 마크업 언어
- **립싱크 (Lip Sync):** 음성과 입 모양을 동기화하는 것
- **Provider:** Flutter의 상태 관리 라이브러리

### 17.2 문제 해결 가이드

**Q: TTS 음성이 너무 빠릅니다.**  
A: 설정 화면에서 속도 슬라이더를 조절하거나, voice_config.json의 rate 값을 'slow'로 변경하세요.

**Q: 립싱크가 동기화되지 않습니다.**  
A: 
1. tts_server.py가 실행 중인지 확인
2. .env 파일의 VISEME_WEBSOCKET_URL 확인
3. 방화벽 설정 확인
4. viseme_debug_screen.dart에서 WebSocket 연결 상태 확인

**Q: Android 에뮬레이터에서 WebSocket 연결 실패**  
A: URL을 ws://10.0.2.2:8000/ws/tts로 변경하세요.

**Q: 앱이 크래시됩니다.**  
A: logs/ 디렉토리의 로그 파일을 확인하고 GitHub Issues에 보고하세요.

### 17.3 개발 팁
- 디버그 모드: `flutter run --debug`
- 프로파일링: `flutter run --profile`
- 핫 리로드: `r` 키
- 핫 리스타트: `R` 키
- DevTools: `flutter pub global activate devtools`

---

**문서 작성일:** 2025년 12월 13일  
**문서 버전:** 1.0  
**최종 수정일:** 2025년 12월 13일
